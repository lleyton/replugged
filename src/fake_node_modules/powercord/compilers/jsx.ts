import { readFileSync } from 'fs';
import { transform, getVersion } from 'sucrase';
import Compiler from './compiler';

/**
 * JSX compiler
 * @extends {Compiler}
 */
class JSX extends Compiler {
  async _compile () {
    const jsx = readFileSync(this.file, 'utf8');
    return transform(jsx, {
      transforms: [ 'jsx' ],
      filePath: this.file,
      production: true
    }).code;
  }

  get _metadata () {
    return `sucrase+prod ${getVersion()}`;
  }
}

export default JSX;
